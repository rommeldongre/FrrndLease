<div class="container-fluid" id="midcontainer">
    <div class="row">
        <div class="left_title col-lg-2 col-md-2">
            <strong>My Profile</strong>
        </div>
        <div class="right_title col-lg-10 col-md-10">
			<a class="btn btn-primary btn-simple" ng-click="viewOrders()"><u>View My Orders</u></a>
            <a class="btn btn-primary btn-simple" href="/UserProfile?userUid={{user.userUid}}"><u>View Public Profile</u></a>
        </div>
    </div>
    <hr/><br/><br/>
    <div class="row" style="display:flex;flex-wrap:wrap;">
        <div class="col-lg-6 col-md-6" style="text-align:center;">
            <div class="loaded-img">
                <img load-image="profilePic" max-width="250" max-height="250" ng-src="" alt="..." />
                <div ng-if="profilePic == '' || profilePic == null || profilePic == 'null' || profilePic == undefined" class="empty-actions">
                    <label class="primary-file-input-label" for="primary-file-input" style="font-size:small;">
                        <i class="fa fa-plus" aria-hidden="true" width="50" height="50" style="display:initial;"></i> Add Profile
                    </label>
                    <input id="primary-file-input" type="file" accept="image/*" onchange="angular.element(this).scope().uploadProfilePic(files[0], true)" style="display:none;" />
                </div>
                <div ng-if="profilePic=='loading'" class="loading-actions">
                    <div class="loading-primary-image" style="font-size:small;">
                        <i class="fa fa-refresh fa-spin" aria-hidden="true" width="50" height="50" style="display:initial;"></i> Saving..
                    </div>
                </div>
                <div ng-if="profilePic != 'loading' && profilePic != '' && profilePic != null && profilePic != 'null' && profilePic != undefined" class="actions">
                    <button type="button" class="btn btn-danger btn-simple" ng-click="deleteUserPic(true)">
                        <i class="fa fa-times"></i>
                    </button>
                    <label class="primary-file-input-label" for="primary-file-input" style="font-size:small;">
                        <i class="fa fa-image" aria-hidden="true" width="50" height="50" style="display:initial;"></i> Change Profile
                    </label>
                    <input id="primary-file-input" type="file" accept="image/*" onchange="angular.element(this).scope().uploadProfilePic(files[0], true)" style="display:none;" />
                </div>
            </div>
            <br/>
            <div id="user.userId" style="font-size:large;margin:5px;">
                <i class="fa fa-user"></i><b> {{'  '+ user.userId }}</b>
            </div>
            <div style="font-size:large;margin:5px;">
                <i class="fa fa-map-marker" aria-hidden="true"></i>{{locality}}
            </div>
            <user-badges user-id="user.userId"></user-badges>
            <hr/>
            <label class="label label-default label-fill">Photo Id - </label>
            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <img load-image="photoId" max-width="150" max-height="150" ng-src="" alt="..." /><br/>
                    <i ng-if="photoId=='loading'" class="fa fa-spinner fa-pulse fa-fw"></i>
                    <span class="sr-only">Loading...</span><br ng-if="photoId=='loading'" />
                    <i ng-if="addressVerified" class="green" aria-hidden="true">Address Verified</i>
                    <i ng-if="!addressVerified" class="red" aria-hidden="true">Address Not Verified</i>
                    <hr/>
                    <label class="btn btn-primary btn-fill" for="id-file-input" style="cursor:pointer;">
                        <i class="fa fa-upload" aria-hidden="true"></i> Upload Id
                    </label>
                    <input id="id-file-input" type="file" accept="image/*" onchange="angular.element(this).scope().uploadProfilePic(files[0], false)" style="display:none;" />
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-md-6">
            <label class="control-label">Credits</label>
            <div id="credit" class="input-group">
                <input type="text" class="form-control" ng-disabled="true" ng-model="credit">
                <a class="input-group-addon" href="" data-toggle="modal" data-target="#paymentModal"><i class="fa fa-plus"></i></a>
            </div>
            <br/>
            <label class="control-label">Refferal</label>
            <div id="referralCode" class="input-group">
                <input type="text" class="form-control" ng-disabled="true" ng-model="referralCode">
                <a class="input-group-addon" href="myapp.html#/myfriendslist"><i class="fa fa-share-alt"></i></a>
            </div>
            <br/>
            <label class="control-label">Membership Expiry Date</label>
            <div id="membershipDate" class="input-group">
                <input type="text" class="form-control" ng-disabled="true" ng-model="userFeeExpiry">
                <a class="input-group-addon" href="" data-toggle="modal" data-target="#uberPayModal"><i class="fa fa-inr" aria-hidden="true"></i></a>
            </div>
            <br/><hr/>
            <label class="control-label">Notification Preferences - </label>
            <div class="btn-group btn-group-justified" role="group" aria-label="...">
                <div class="btn-group" role="group">
                    <button type="button" ng-class="((status=='email_activated' || status == 'facebook' || status=='google') ? 'btn btn-simple btn-success' : ((secStatus==1) ? 'btn btn-simple btn-success' : 'btn btn-simple btn-danger'))" ng-click="changeEmailNotification()">
                        <i class="fa fa-envelope-o" aria-hidden="true"></i>
                        EMAIL
                        <i ng-if="notification=='EMAIL' || notification=='BOTH'" class="fa fa-check-square-o" aria-hidden="true" style="float: right;margin-top: 1%;"></i>
                        <i ng-if="notification=='SMS' || notification=='NONE'" class="fa fa-square-o" aria-hidden="true" style="float: right;margin-top: 1%;"></i>
                    </button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" ng-class="((status=='mobile_activated') ? 'btn btn-simple btn-success' : ((secStatus==1) ? 'btn btn-simple btn-success' : 'btn btn-simple btn-danger'))" ng-click="changeSmsNotification()">
                        <i class="fa fa-mobile" aria-hidden="true"></i>
                        SMS
                        <i ng-if="notification=='SMS' || notification=='BOTH'" class="fa fa-check-square-o" aria-hidden="true" style="float: right;margin-top: 1%;"></i>
                        <i ng-if="notification=='EMAIL' || notification=='NONE'" class="fa fa-square-o" aria-hidden="true" style="float: right;margin-top: 1%;"></i>
                    </button>
                </div>
            </div><hr/>
            <form name="secForm">
                <label ng-if="(status=='mobile_activated')" class="control-label">Email</label>
                <div ng-if="(status=='mobile_activated')" class="input-group">
                    <input name="email" type="email" class="form-control" id="email" ng-model="user.email" ng-pattern="/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/" ng-change="emailTouched()" placeholder="Email">
                    <span class="input-group-btn">
                        <button ng-if="changedText" class="btn btn-fill btn-info" ng-click="undoEmail()">Undo</button>
                        <button class="btn btn-fill ng-class:{'btn-success':secStatus==1,'btn-danger':secStatus==0}" ng-click="(secForm.email.$touched && secForm.email.$valid) ? verifyEmail(user.email) : user.error='Not a valid email'">{{(secStatus==1) ? 'verified' : 'Save &amp; verify'}}</button>
                    </span>
                </div>
                <label ng-if="(status=='email_activated' || status == 'facebook' || status=='google')" class="control-label">Mobile</label>
                <div name="mobile" ng-if="(status=='email_activated' || status == 'facebook' || status=='google')" class="input-group">
                    <input type="text" class="form-control" id="mobile" ng-model="user.mobile" ng-change="mobileTouched()" placeholder="Mobile">
                    <span class="input-group-btn">
                        <button ng-if="changedText" class="btn btn-fill btn-info" ng-click="undoMobile()">Undo</button>
                        <button class="btn btn-fill ng-class:{'btn-success':secStatus==1,'btn-danger':secStatus==0}" ng-click="(user.mobile.length == 10) ? verifyMobile(user.mobile) : user.error='Not a valid Mobile Number'">{{(secStatus==1) ? 'verified' : 'Save &amp; verify'}}</button>
                    </span>
                </div>
            </form><br/>
            <form name="form">
                <label class="control-label">Name</label>
                <div id="name" class="input-group">
                    <input name="fullname" id="fullname" type="text" class="form-control" placeholder="Full Name" ng-change="(form.fullname.$dirty && form.fullname.$valid) ? user.error='' : user.error='Name is required'" ng-model="fullname" required>
                    <span class="input-group-btn">
                        <button class="btn btn-fill btn-primary" ng-click="form.$valid ? updateProfile() : user.error='Please enter correct data!!'">Save</button>
                    </span>
                </div>
                <br/>
                <label class="control-label">Location</label>
                <div id="location" class="input-group">
                    <input name="location" type="text" class="form-control" id="location" ng-change="(form.location.$valid && form.location.$dirty) ? user.error='' : user.error='Location is required'" ng-model="location" ng-autocomplete options="options" details="details" placeholder="Location" required>
                    <span class="input-group-btn">
                        <button class="btn btn-fill btn-primary" ng-click="form.$valid ? updateProfile() : user.error='Please enter correct data!!'">Save</button>
                    </span>
                </div>
                <br/>
                <i ng-if="user.saving" class="fa fa-refresh fa-spin" aria-hidden="true"></i>
                <span ng-if="user.error != ''" style="color:red;padding:10px;">{{user.error}}</span>
            </form>
            <br/>
        </div>
    </div>
	
<!-- Order Details pop up starts here-->
<button href="#myModalTableOrders" id="openBtn_orderDetails" data-toggle="modal" class="btn btn-default">Modal</button>

<div class="modal fade" id="myModalTableOrders" data-backdrop="static" data-keyboard="false">
<div class="modal-dialog modal-lg">
	<div class="modal-content">
		<div class="modal-header">
		<button type="button" class="close" ng-click="cancel_credit()" data-dismiss="modal" aria-hidden="true">×</button>
		<h3 class="modal-title">Order Details</h3>
		</div>
		<div class="modal-body">
		<!--<h5 class="text-center">Credit Timeline is as follows</h5>-->
		<table id="ordersTable" class="table table-striped" style='table-layout:fixed;word-wrap:break-word;'>
			<thead>
            <tr>
				<th class="tablecell" style="width: 15%">Order Id</th>
                <th class="tablecell" style="width: 20%">Date</th>
				<th class="tablecell" style="width: 10%">Amount</th>
				<th class="tablecell" style="width: 15%">Promo Code</th>
				<th class="tablecell" style="width: 20%">Razor Pay Id</th>
				<th class="tablecell" style="width: 20%">Credit Type</th>
            </tr>
        </thead>
        <tbody ng-repeat="order in orders" >
            <tr ng-repeat="y in order" >
				<td>{{ y.orderId }}</td>
				<td>{{ y.orderDate }}</td>
				<td>{{ y.amount }}</td>
				<td>{{ y.promoCode }}</td>
				<td class="text-center">{{y.razorPayId}}</td>
				<td>{{ y.creditType }}</td>
			  </tr>
        </tbody>
		</table>
		</div>
		<div class="modal-footer">
		<button type="button" class="btn btn-default btn-fill" ng-click="cancel_credit()" data-dismiss="modal" ng-click="">Cancel</button>
		<button class="btn btn-primary btn-fill" style="text-align: end;margin-top: 0%;" id="next_orders" ng-model="showNext" ng-if="showNext == true" ng-click="loadNextOrders()">Load More</button>
		</div>
				
	</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- Order Details Details pop up ends here-->

<!--
    <div class="row">
        <div class="col-lg-6 col-md-6" style="text-align:center;">
            <div class="row" style="display:flex;flex-wrap:wrap;">
                <div class="col-md-6" style="padding-right:20px; border-right: 1px solid #ccc;">
                    <label class="label label-default label-fill">Photo Id - </label>
                    <div class="row">
                        <img load-image="photoId" max-width="100" max-height="100" ng-src="" alt="..." /><br/>
                        <i ng-if="photoId=='loading'" class="fa fa-spinner fa-pulse fa-fw"></i>
                        <span class="sr-only">Loading...</span><br ng-if="photoId=='loading'" />
                        <i ng-if="addressVerified" class="green" aria-hidden="true">Address Verified</i>
                        <i ng-if="!addressVerified" class="red" aria-hidden="true">Address Not Verified</i>
                    </div>
                </div>
                <div class="col-md-6">
                    <label class="label label-default label-fill">Membership Expiry Date - </label>
                    <div class="row" style="margin-top:15%;">
                        <i ng-if="userFeeExpiry != null" class="green" aria-hidden="true">{{userFeeExpiry | date}}</i>
                        <i ng-if="userFeeExpiry == null" class="red" aria-hidden="true">Not Applicable</i>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <hr/>
                    <label class="btn btn-primary btn-fill btn-sm" for="id-file-input" style="cursor:pointer;">
                        <i class="fa fa-upload" aria-hidden="true"></i> Upload Id
                    </label>
                    <input id="id-file-input" type="file" accept="image/*" onchange="angular.element(this).scope().uploadProfilePic(files[0], false)" style="display:none;" />
                </div>
                <div class="col-md-6">
                    <hr/>
                    <button class="btn btn-primary btn-fill btn-sm" data-toggle="modal" data-target="#uberPayModal"><i class="fa fa-inr" aria-hidden="true"></i> Pay Frrndlease</button>
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-md-6">
            <form name="form">
                <label class="control-label">Name</label>
                <input name="fullname" type="text" class="form-control" id="fullname" ng-change="(form.fullname.$dirty && form.fullname.$valid) ? user.error='' : user.error='Name is required'" ng-model="fullname" placeholder="Full Name" required>
                <br/>
                <label class="control-label">Location</label>
                <input name="location" type="text" class="form-control" id="location" ng-change="(form.location.$valid && form.location.$dirty) ? user.error='' : user.error='Location is required'" ng-model="location" ng-autocomplete options="options" details="details" placeholder="Location" required>
                <br/>
                <span ng-if="user.error != ''" style="color:red;padding:10px;">{{user.error}}</span>
            </form>
            <div class="row" style="text-align:center;padding-bottom:20px;">
                <button type="button" class="btn btn-primary btn-fill" ng-click="form.$valid ? updateProfile() : user.error='Please enter correct data!!'">Save</button>
                <button type="button" class="btn btn-default btn-simple" ng-click="cancel()">Cancel</button>
            </div>
        </div>
    </div>
-->
</div>
